<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Inkling Gradient Challenge</title>
    <style type="text/css" media="screen">
        * {
            margin: 0;
            padding: 0;
        }
        
        #gradient {
            position: relative;
            margin: 0 auto;
            width: 400px;
            height: 400px;
        }
        
        #gradient div {
            position: absolute;
        }
    </style>
        <script type="text/javascript" charset="utf-8">


var Gradient = function(element){
    this.element = element;
    this.stops = arguments[1];
    this.sideLength = element.offsetHeight;
    var tempCircle, circleDiv;

    Gradient.prototype.drawCircle = function(id, color){
        circleDiv=document.createElement("div");
        circleDiv.setAttribute("id", "id_"+id);
        circleDiv.setAttribute("class", "circle");
        circleDiv.setAttribute("style", "margin:"+(this.sideLength/2 - id).toString()+'px');
        circleDiv.style.width = (id*2)+'px';
        circleDiv.style.height = (id*2)+ 'px';
        circleDiv.style.borderRadius = (id*2)+'px';
        circleDiv.style.backgroundColor = 'rgb('+color+','+color+','+color+')';
        circleDiv.style.zIndex = 1000-id;
        return circleDiv;
    }

    Gradient.prototype.draw = function(){
        element.innerHTML = '';
        var sideLength = element.offsetHeight;
        var fragment = document.createDocumentFragment();
        var numStops = this.stops.length;
        var numBetweenStops = (sideLength / 2) / numStops;
        var j = 0;

        if(numStops == 0) return;
        
        var colorIncrement = 0;
        color = this.stops[j];
        // if (numStops > 1){
        //     colorIncrement = (stops[j+1]-stops[j])/numStops;
        // }
        for (var i = sideLength/2; i > 0; i--){
            console.log(numBetweenStops);
            console.log(i);
            console.log(numStops);
            console.log(j+1);
            if (i%numBetweenStops == 0 && numStops > j+1){
                colorIncrement = (this.stops[j+1]-this.stops[j])/numBetweenStops;
                console.log(colorIncrement);
                j++;
            }
            this.circleDiv = this.drawCircle(i,Math.round(color));
            color += colorIncrement;
            fragment.appendChild(circleDiv);
        }
        this.element.appendChild(fragment);
    }

    Gradient.prototype.clear = function(){
        this.stops = [];
        this.draw();
    }

    Gradient.prototype.pop = function(){
        var returnStop = stops.pop();
        this.draw()
        return returnStop;
    }

    Gradient.prototype.push = function(){
        this.stops.push(arguments);
        this.draw();
    }

    Gradient.prototype.shift = function(){
        var returnStop = stops.shift();
        this.draw();
        return returnStop;
    }

    Gradient.prototype.unshift = function(){
        this.stops.unshift(arguments);
        this.draw();
    }

    Gradient.prototype.reverse = function(){
        this.stops.reverse();
        this.draw();
    }

    Gradient.prototype.map = function(callback){
        stops.map(callback);
        this.draw();
    }
    Gradient.prototype.sort = function(callback){
        if (callback == null){
            this.stops.sort();
        }
        else{
            this.stops.sort(callback);
        }
        this.draw();
    }
    onReady = function(){
        var element = document.getElementById('gradient');
        var gradient = new Gradient(element, [0, 255]);
        gradient.draw();
    }
}
    </script>
</head>
<body>
    <div id="gradient"></div>
    

</body>
</html>